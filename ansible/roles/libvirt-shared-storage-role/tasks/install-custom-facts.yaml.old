---
- name: Install custom facts
  hosts: "{{ hostgroup | default('rac19c01') }}"
  remote_user: vagrant
  become: yes
  become_method: sudo
  become_user: root

  vars:

    remote_dir: /etc/ansible/facts.d
    facts_file_virsh: "./facts.d/{{ ansible_hostname }}/virsh.fact"
    facts_file_nic: "./facts.d/{{ ansible_hostname }}/nic.fact"

  tasks:

  - name: Create Facts Dir on Managed Hosts
    file:
      path: "{{ remote_dir }}"
      state: directory
      recurse: yes

  - name: Copy Contents virsh.fact
    copy:
      src: "{{ facts_file_virsh }}"
      dest: "{{ remote_dir }}"

  - name: Copy Contents nic.fact
    copy:
      src: "{{ facts_file_nic }}"
      dest: "{{ remote_dir }}"
